{% assign footer_id = section.id | replace: '_', '' | downcase %}
{% assign default_gradient_colors = '#ff6b6b,#4ecdc4,#45b7d1,#96ceb4,#feca57,#ff9ff3,#54a0ff' | split: ',' %}
{% assign gradient_colors = '' %}
{% for default_color in default_gradient_colors %}
  {% assign color_key = 'gradient_color_' | append: forloop.index %}
  {% assign color_value = section.settings[color_key] | default: default_color %}
  {% if gradient_colors != '' %}
    {% assign gradient_colors = gradient_colors | append: ', ' %}
  {% endif %}
  {% assign gradient_colors = gradient_colors | append: color_value %}
{% endfor %}
{% assign gradient_speed = section.settings.gradient_speed | default: 18 %}
{% assign static_bg_color = section.settings.static_bg_color | default: '#334fb4' %}
{% assign text_color = section.settings.master_text_color | default: '#ffffff' %}

{% stylesheet %}
  @keyframes rainbowGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .footer-section-{{ footer_id }} {
    position: relative;
    color: {{ text_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    padding-left: {{ section.settings.footer_padding }}px;
    padding-right: {{ section.settings.footer_padding }}px;
    overflow: visible !important;
  }

  .footer-section {
    overflow: visible !important;
  }

  .footer-section[style*='rainbowGradient'] {
    position: relative;
    overflow: visible !important;
  }

  .footer-section-{{ footer_id }}[style*='rainbowGradient'] {
    position: relative;
    overflow: visible !important;
  }

  .footer-section-{{ footer_id }} a {
    color: inherit;
  }

  .footer-section-{{ footer_id }} .footer__inner {
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    z-index: 30;
  }

  .footer-section-{{ footer_id }} .footer__icon {
    display: block;
    max-width: 100%;
    height: auto;
  }

  .footer-section-{{ footer_id }} .footer__layout {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: flex-start;
    gap: 2rem;
    padding: 2rem 0;
    margin-bottom: {{ section.settings.section_spacing }}px;
  }

  .footer-section-{{ footer_id }} .footer__block {
    flex: 1 1 200px;
    border-radius: 12px;
    padding: 1rem;
    background: transparent;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    gap: 1rem;
    box-sizing: border-box;
  }

  .footer-section-{{ footer_id }} .footer__block--newsletter {
    flex: 0 0 50%;
    max-width: 50%;
    margin-right: auto;
    padding: 0;
  }

  .footer-section-{{ footer_id }} .footer__block--link_group {
    flex: 1 1 200px;
    max-width: 320px;
  }

  .footer-section-{{ footer_id }} .footer__block--social_icons {
    flex: 0 1 200px;
    max-width: 240px;
    align-self: flex-start;
  }

  .footer-section-{{ footer_id }} .footer__block--payments {
    flex: 1 1 100%;
    padding: 0;
  }

  .footer-section-{{ footer_id }} .footer__block .footer__heading,
  .footer-section-{{ footer_id }} .footer__block h4 {
    margin-bottom: 0.75rem;
    font-weight: 600;
  }

  .footer-section-{{ footer_id }} .footer__block--newsletter {
    padding: 0;
  }

  .footer-section-{{ footer_id }} .footer__newsletter {
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    margin-left: 0 !important;
    margin-right: auto;
    padding: 0 !important;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__card {
    position: relative;
    overflow: visible !important;
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    box-sizing: border-box;
    padding: 2rem;
    max-width: 420px;
    margin-left: 0;
    margin-right: auto;
    width: 100%;
    transform: translateX(-0.5rem);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    gap: 1.5rem;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    z-index: 20;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__image {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 120px !important;
    height: auto !important;
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 40 !important;
    pointer-events: none;
    filter: none !important;
    mix-blend-mode: normal !important;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__card img[src=''] {
    display: none;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__content {
    position: relative;
    z-index: 20;
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    width: 100%;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__content .footer__newsletter-copy {
    margin: 0;
    line-height: 1.4;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__content--with-image .footer__newsletter-copy {
    margin-right: 130px;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__form,
  .footer-section-{{ footer_id }} .footer__newsletter-form {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
    width: 100%;
    flex-wrap: wrap;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__form input[type='email'],
  .footer-section-{{ footer_id }} .footer__newsletter-form input[type='email'] {
    flex: 1 1 auto;
    padding: 0.6rem 0.8rem;
    border-radius: 6px;
    border: none;
    background: #ffffff;
    color: #1c1c1c;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__form input[type='email']:focus-visible,
  .footer-section-{{ footer_id }} .footer__newsletter-form input[type='email']:focus-visible {
    outline: 3px solid rgba(255, 255, 255, 0.8);
    outline-offset: 2px;
  }

  .footer-section-{{ footer_id }} .footer-newsletter__button {
    flex: 0 0 auto;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    margin-top: 0;
    height: auto;
  }

  @media (max-width: 600px) {
    .footer-section-{{ footer_id }} .footer-newsletter__card {
      max-width: 100%;
      transform: none;
    }

    .footer-section-{{ footer_id }} .footer-newsletter__image {
      width: 80px !important;
      height: auto !important;
    }

    .footer-section-{{ footer_id }} .footer-newsletter__content--with-image .footer__newsletter-copy {
      margin-right: 100px;
    }

    .footer-section-{{ footer_id }} .footer-newsletter__form,
    .footer-section-{{ footer_id }} .footer__newsletter-form {
      flex-direction: column;
      align-items: stretch;
    }

    .footer-section-{{ footer_id }} .footer-newsletter__button {
      width: 100%;
      text-align: center;
    }
  }

  .footer-section-{{ footer_id }} .footer__heading {
    font-size: var(--footer-heading-size, 1.15rem);
    font-weight: 600;
    margin: 0;
    letter-spacing: 0.02em;
  }

  .footer-section-{{ footer_id }} .footer__text,
  .footer-section-{{ footer_id }} .footer__list,
  .footer-section-{{ footer_id }} .footer__newsletter-copy {
    font-size: var(--footer-text-size, 0.95rem);
    line-height: 1.6;
    opacity: 0.92;
    max-width: 520px;
  }

  .footer-section-{{ footer_id }} .footer__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .footer-section-{{ footer_id }} .footer__link {
    font-size: var(--footer-link-size, 0.95rem);
    text-decoration: none;
    opacity: 0.9;
    transition: opacity 0.25s ease, transform 0.25s ease;
  }

  .footer-section-{{ footer_id }} .footer__link:hover,
  .footer-section-{{ footer_id }} .footer__link:focus-visible {
    opacity: 1;
    transform: translateX(2px);
  }

  .footer-section-{{ footer_id }} .footer__button {
    flex: 0 0 auto;
    height: 52px;
    padding: 0 28px;
    border-radius: 14px;
    border: none;
    cursor: pointer;
    font-size: var(--footer-button-size, 0.95rem);
    font-weight: 600;
    text-transform: uppercase;
    color: #ffffff;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    box-shadow: 0 10px 24px rgba(118, 75, 162, 0.35);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .footer-section-{{ footer_id }} .footer__button:hover,
  .footer-section-{{ footer_id }} .footer__button:focus-visible {
    transform: translateY(-1px);
    box-shadow: 0 14px 28px rgba(118, 75, 162, 0.45);
    outline: 3px solid rgba(255, 255, 255, 0.6);
    outline-offset: 3px;
  }

  .footer-section-{{ footer_id }} .footer__newsletter-feedback {
    width: 100%;
    min-height: 1.25rem;
    font-size: 0.85rem;
  }

  .footer-section-{{ footer_id }} .footer__newsletter-feedback--success {
    color: #d9ffdb;
  }

  .footer-section-{{ footer_id }} .footer__newsletter-feedback--error {
    color: #ffe1e1;
  }

  .footer-section-{{ footer_id }} .footer__social {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    align-items: flex-start;
  }

  .footer-section-{{ footer_id }} .footer__social-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.25s ease, opacity 0.25s ease;
    opacity: 0.88;
  }

  .footer-section-{{ footer_id }} .footer__social-link:hover,
  .footer-section-{{ footer_id }} .footer__social-link:focus-visible {
    transform: translateY(-2px);
    opacity: 1;
    outline: 3px solid rgba(255, 255, 255, 0.6);
    outline-offset: 3px;
  }

  .footer-section-{{ footer_id }} .footer__social img,
  .footer-section-{{ footer_id }} .footer__social svg {
    width: var(--footer-social-size, 28px);
    height: var(--footer-social-size, 28px);
    object-fit: contain;
  }

  .footer-section-{{ footer_id }} .footer__payments {
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-top: 2rem;
  }

  .footer-section-{{ footer_id }} .footer__payment-item {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex: 0 0 auto;
  }

  .footer-section-{{ footer_id }} .footer__payments img,
  .footer-section-{{ footer_id }} .footer__payments svg {
    height: var(--footer-payment-icon-height, 24px);
    width: auto;
    object-fit: contain;
  }

  .footer-section-{{ footer_id }} .footer__policies {
    margin-top: {{ section.settings.policies_bottom_margin }}px;
    padding-top: {{ section.settings.policies_bottom_margin }}px;
    border-top: 1px solid rgba(255, 255, 255, 0.35);
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
    font-size: 0.85rem;
  }

  .footer-section-{{ footer_id }} .footer__policy-separator {
    opacity: 0.6;
  }

  .footer-section-{{ footer_id }} .footer__copyright {
    margin-top: {{ section.settings.copyright_top_margin }}px;
    text-align: center;
    font-size: 0.85rem;
    opacity: 0.85;
  }

  .footer-section-{{ footer_id }} .visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    border: 0 !important;
  }

  @media (max-width: 1024px) {
    .footer-section-{{ footer_id }} {
      padding-left: {{ section.settings.footer_padding | times: 0.8 | round }}px;
      padding-right: {{ section.settings.footer_padding | times: 0.8 | round }}px;
      padding-top: {{ section.settings.padding_top | times: 0.8 | round }}px !important;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.8 | round }}px !important;
    }
    .footer-section-{{ footer_id }} .footer__block--newsletter {
      flex: 1 1 100%;
      max-width: 100%;
      margin-right: 0;
    }

    .footer-section-{{ footer_id }} .footer__block--link_group,
    .footer-section-{{ footer_id }} .footer__block--social_icons {
      max-width: 320px;
    }
  }

  @media (max-width: 768px) {
    .footer-section-{{ footer_id }} {
      padding-left: {{ section.settings.footer_padding | times: 0.65 | round }}px;
      padding-right: {{ section.settings.footer_padding | times: 0.65 | round }}px;
      padding-top: {{ section.settings.padding_top | times: 0.65 | round }}px !important;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.65 | round }}px !important;
    }

    .footer-section-{{ footer_id }} .footer__layout {
      flex-direction: column;
      gap: 1.5rem;
    }

    .footer-section-{{ footer_id }} .footer__block {
      max-width: 100%;
    }

    .footer-section-{{ footer_id }} .footer__newsletter {
      align-items: center;
      text-align: center;
    }

    .footer-section-{{ footer_id }} .footer__newsletter-brand {
      align-items: center;
      text-align: center;
    }

    .footer-section-{{ footer_id }} .footer__newsletter-form {
      flex-direction: column;
      align-items: stretch;
    }

    .footer-section-{{ footer_id }} .footer__newsletter-form input[type='email'],
    .footer-section-{{ footer_id }} .footer__button {
      width: 100%;
      margin-top: 0.5rem;
    }

    .footer-section-{{ footer_id }} .footer__social {
      align-items: center;
    }
  }
{% endstylesheet %}

<section
  class="footer-section footer-section-{{ footer_id }}"
  role="contentinfo"
  aria-label="{{ section.settings.footer_aria_label | default: 'Kul Kid footer' }}"
  style="
    color: {{ text_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    {% if section.settings.enable_gradient %}
      background: linear-gradient(270deg, {{ gradient_colors }});
      background-size: 1200% 1200%;
      animation: rainbowGradient {{ gradient_speed }}s ease infinite;
    {% else %}
      background-color: {{ static_bg_color }};
    {% endif %}
  "
>
  <div class="footer__inner">
    <div class="footer__layout">
      {% for block in section.blocks %}
        <div class="footer__block footer__block--{{ block.type }}" {{ block.shopify_attributes }}>
          {% case block.type %}
            {% when 'newsletter' %}
              {% assign heading_size = block.settings.heading_font_size | default: 28 | plus: 0 %}
              {% assign description_size = block.settings.description_font_size | default: 16 | plus: 0 %}
              {% assign button_size = block.settings.button_font_size | default: 15 | plus: 0 %}
              {% assign newsletter_padding_top = block.settings.newsletter_padding_top | default: 24 | plus: 0 %}
              {% assign newsletter_padding_bottom = block.settings.newsletter_padding_bottom | default: 24 | plus: 0 %}
              {% assign newsletter_padding_side = block.settings.newsletter_padding_side | default: 24 | plus: 0 %}

              <div
                class="footer__newsletter"
              >
                <div
                  class="footer-newsletter__card"
                  style="padding: {{ newsletter_padding_top }}px {{ newsletter_padding_side }}px {{ newsletter_padding_bottom }}px;"
                >
                  <div class="footer-newsletter__content{% if block.settings.club_icon != blank %} footer-newsletter__content--with-image{% endif %}">
                    {% if block.settings.heading != blank %}
                      <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
                    {% endif %}
                    {% if block.settings.description != blank %}
                      <div class="footer__newsletter-copy" style="--footer-text-size: {{ description_size }}px;">{{ block.settings.description }}</div>
                    {% endif %}

                    {% form 'customer', id: 'ContactFooter', class: 'footer__newsletter-form footer-newsletter__form' %}
                      <input type="hidden" name="contact[tags]" value="newsletter">

                      <label class="visually-hidden" for="ContactFooter-email">Din e-postadresse</label>
                      <input
                        id="ContactFooter-email"
                        type="email"
                        name="contact[email]"
                        value="{{ form.email }}"
                        placeholder="{{ block.settings.email_placeholder | default: 'Din e-postadresse' }}"
                        autocapitalize="off"
                        autocomplete="email"
                        spellcheck="false"
                        required
                      >

                      <button
                        type="submit"
                        class="footer__button footer-newsletter__button"
                        style="--footer-button-size: {{ button_size }}px;"
                      >
                        {{ block.settings.button_text | default: 'Få 15% nå' }}
                      </button>

                      <div class="footer__newsletter-feedback">
                        <p class="footer__newsletter-feedback--success">Success message placeholder</p>
                      </div>
                    {% endform %}
                  </div>

                  {% if block.settings.club_icon != blank %}
                    <img
                      src="{{ block.settings.club_icon | file_url }}"
                      alt="{{ block.settings.club_icon_alt | escape }}"
                      width="120"
                      class="footer-newsletter__image"
                      loading="eager"
                      decoding="auto"
                    >
                  {% endif %}
                </div>
              </div>

            {% when 'link_group' %}
              {% assign heading_size = block.settings.heading_size | default: 20 | plus: 0 %}
              {% assign link_size = block.settings.link_size | default: 15 | plus: 0 %}

              {% if block.settings.heading != blank %}
                <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
              {% endif %}
              <ul class="footer__list" style="--footer-link-size: {{ link_size }}px;">
                {% assign menu_handle = block.settings.menu %}
                {% if menu_handle != blank and linklists[menu_handle] and linklists[menu_handle].links.size > 0 %}
                  {% for link in linklists[menu_handle].links %}
                    <li><a class="footer__link" href="{{ link.url }}">{{ link.title }}</a></li>
                  {% endfor %}
                {% elsif block.settings.show_all_collections %}
                  {% assign rendered_collections = 0 %}
                  {% for collection in collections %}
                    {% if collection == blank or collection.all_products_count == 0 %}
                      {% continue %}
                    {% endif %}
                    <li><a class="footer__link" href="{{ collection.url }}">{{ collection.title }}</a></li>
                    {% assign rendered_collections = rendered_collections | plus: 1 %}
                    {% if rendered_collections >= block.settings.collection_limit %}
                      {% break %}
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <li><span class="footer__text" style="--footer-text-size: {{ link_size }}px;">Velg en meny for å vise lenker i denne kolonnen.</span></li>
                {% endif %}
                {% if block.settings.view_all_label != blank and block.settings.view_all_url != blank %}
                  <li><a class="footer__link" href="{{ block.settings.view_all_url }}">{{ block.settings.view_all_label }}</a></li>
                {% endif %}
              </ul>

            {% when 'social_icons', 'social' %}
              {% assign heading_size = block.settings.heading_size | default: 20 | plus: 0 %}
              {% assign icon_size = block.settings.social_icon_size | default: 28 | plus: 0 %}
              {% assign fallback_size = heading_size | minus: 4 %}
              {% if fallback_size < 12 %}
                {% assign fallback_size = 12 %}
              {% endif %}

              {% if block.settings.heading != blank %}
                <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
              {% endif %}

              {% assign instagram_link = block.settings.instagram_link | default: block.settings.instagram_url %}
              {% assign facebook_link = block.settings.facebook_link | default: block.settings.facebook_url %}
              {% assign tiktok_link = block.settings.tiktok_link | default: block.settings.tiktok_url %}
              {% assign spotify_link = block.settings.spotify_link | default: block.settings.spotify_url %}
              {% assign youtube_link = block.settings.youtube_link %}
              {% assign has_social = false %}

              <div class="footer__social" style="--footer-social-size: {{ icon_size }}px;">
                {% if instagram_link != blank %}
                  {% assign has_social = true %}
                  <a
                    class="footer__social-link"
                    href="{{ instagram_link }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Instagram"
                  >
                    <span class="visually-hidden">Følg Kul Kid på Instagram</span>
                    {% if block.settings.instagram_icon != blank %}
                      <img src="{{ block.settings.instagram_icon | file_url }}" alt="Instagram" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-instagram' %}
                    {% endif %}
                  </a>
                {% endif %}

                {% if facebook_link != blank %}
                  {% assign has_social = true %}
                  <a
                    class="footer__social-link"
                    href="{{ facebook_link }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Facebook"
                  >
                    <span class="visually-hidden">Følg Kul Kid på Facebook</span>
                    {% if block.settings.facebook_icon != blank %}
                      <img src="{{ block.settings.facebook_icon | file_url }}" alt="Facebook" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-facebook' %}
                    {% endif %}
                  </a>
                {% endif %}

                {% if tiktok_link != blank %}
                  {% assign has_social = true %}
                  <a
                    class="footer__social-link"
                    href="{{ tiktok_link }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="TikTok"
                  >
                    <span class="visually-hidden">Følg Kul Kid på TikTok</span>
                    {% if block.settings.tiktok_icon != blank %}
                      <img src="{{ block.settings.tiktok_icon | file_url }}" alt="TikTok" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-tiktok' %}
                    {% endif %}
                  </a>
                {% endif %}

                {% if spotify_link != blank %}
                  {% assign has_social = true %}
                  <a
                    class="footer__social-link"
                    href="{{ spotify_link }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Spotify"
                  >
                    <span class="visually-hidden">Følg Kul Kid på Spotify</span>
                    {% if block.settings.spotify_icon != blank %}
                      <img src="{{ block.settings.spotify_icon | file_url }}" alt="Spotify" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-spotify' %}
                    {% endif %}
                  </a>
                {% endif %}

                {% if youtube_link != blank %}
                  {% assign has_social = true %}
                  <a
                    class="footer__social-link"
                    href="{{ youtube_link }}"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="YouTube"
                  >
                    <span class="visually-hidden">Følg Kul Kid på YouTube</span>
                    {% if block.settings.youtube_icon != blank %}
                      <img src="{{ block.settings.youtube_icon | file_url }}" alt="YouTube" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-youtube' %}
                    {% endif %}
                  </a>
                {% endif %}

                {% unless has_social %}
                  <span class="footer__text" style="--footer-text-size: {{ fallback_size }}px;">Legg til lenker for Instagram, Facebook, TikTok, Spotify eller YouTube i blokkinnstillingene.</span>
                {% endunless %}
              </div>

            {% when 'payments' %}
              {% assign heading_size = block.settings.heading_size | default: 20 | plus: 0 %}
              {% assign icon_height = block.settings.icon_height | default: 28 | plus: 0 %}
              {% assign empty_state_size = heading_size | minus: 4 %}
              {% if empty_state_size < 12 %}
                {% assign empty_state_size = 12 %}
              {% endif %}

              {% if block.settings.heading != blank %}
                <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
              {% endif %}
              <div class="footer__payments" style="--footer-payment-icon-height: {{ icon_height }}px;">
                {% if block.settings.show_visa %}
                  <div class="footer__payment-item">
                    {% if block.settings.visa_icon != blank %}
                      <img src="{{ block.settings.visa_icon | file_url }}" alt="Visa" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                    {% else %}
                      {% render 'icon-payment', name: 'visa' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.show_mastercard %}
                  <div class="footer__payment-item">
                    {% if block.settings.mastercard_icon != blank %}
                      <img src="{{ block.settings.mastercard_icon | file_url }}" alt="Mastercard" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                    {% else %}
                      {% render 'icon-payment', name: 'mastercard' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.show_amex %}
                  <div class="footer__payment-item">
                    {% if block.settings.amex_icon != blank %}
                      <img src="{{ block.settings.amex_icon | file_url }}" alt="American Express" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                    {% else %}
                      {% render 'icon-payment', name: 'amex' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.show_paypal %}
                  <div class="footer__payment-item">
                    {% if block.settings.paypal_icon != blank %}
                      <img src="{{ block.settings.paypal_icon | file_url }}" alt="PayPal" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                    {% else %}
                      {% render 'icon-payment', name: 'paypal' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.show_apple_pay %}
                  <div class="footer__payment-item">
                    {% if block.settings.apple_pay_icon != blank %}
                      <img src="{{ block.settings.apple_pay_icon | file_url }}" alt="Apple Pay" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                    {% else %}
                      {% render 'icon-payment', name: 'apple_pay' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.show_klarna %}
                  <div class="footer__payment-item">
                    {% if block.settings.klarna_icon != blank %}
                      <img src="{{ block.settings.klarna_icon | file_url }}" alt="Klarna" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                    {% else %}
                      {% render 'icon-payment', name: 'klarna' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.custom_payment_svg != blank %}
                  <div class="footer__payment-item">
                    <img src="{{ block.settings.custom_payment_svg | file_url }}" alt="{{ block.settings.custom_payment_label | default: 'Tilleggsbetaling' | escape }}" class="footer__icon" loading="eager" decoding="auto" style="height: {{ icon_height }}px; width: auto;">
                  </div>
                {% endif %}

                {% if block.settings.show_visa == false and block.settings.show_mastercard == false and block.settings.show_amex == false and block.settings.show_paypal == false and block.settings.show_apple_pay == false and block.settings.show_klarna == false and block.settings.custom_payment_svg == blank %}
                  <span class="footer__text" style="--footer-text-size: {{ empty_state_size }}px;">Aktiver betalingsikoner i blokkinnstillingene.</span>
                {% endif %}
              </div>
          {% endcase %}
        </div>
      {% endfor %}
    </div>

    <div class="footer__policies">
      {% assign policy_count = 0 %}

      {% if shop.privacy_policy %}
        <a href="{{ shop.privacy_policy.url }}">{{ shop.privacy_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.terms_of_service %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.terms_of_service.url }}">{{ shop.terms_of_service.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.refund_policy %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.refund_policy.url }}">{{ shop.refund_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.shipping_policy %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.shipping_policy.url }}">{{ shop.shipping_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.subscription_policy %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.subscription_policy.url }}">{{ shop.subscription_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if section.settings.cookie_preferences_link != blank %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ section.settings.cookie_preferences_link }}">{{ section.settings.cookie_preferences_text | default: 'Informasjonskapsler' }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if section.settings.contact_info_link != blank %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ section.settings.contact_info_link }}">{{ section.settings.contact_info_text | default: 'Kontaktinformasjon' }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if section.settings.legal_notice_link != blank %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ section.settings.legal_notice_link }}">{{ section.settings.legal_notice_text | default: 'Juridiske retningslinjer' }}</a>
      {% endif %}
    </div>

    <div class="footer__copyright">
      {{ section.settings.copyright_text | default: '© ' | append: shop.name | append: ' ' | append: now | date: '%Y' }}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Kul Kid Main Footer",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Bakgrunn"
    },
    {
      "type": "checkbox",
      "id": "enable_gradient",
      "label": "Aktiver animert bakgrunn",
      "default": true
    },
    {
      "type": "color",
      "id": "static_bg_color",
      "label": "Statisk bakgrunnsfarge",
      "default": "#334fb4"
    },
    {
      "type": "range",
      "id": "gradient_speed",
      "label": "Animasjonslengde",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "s",
      "default": 15
    },
    {
      "type": "range",
      "id": "gradient_direction",
      "label": "Gradientretning",
      "min": 0,
      "max": 360,
      "step": 5,
      "unit": "°",
      "default": 45
    },
    {
      "type": "range",
      "id": "gradient_size",
      "label": "Gradientstørrelse",
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "%",
      "default": 400
    },
    {
      "type": "color",
      "id": "gradient_color_1",
      "label": "Gradientfarge 1",
      "default": "#ff6b6b"
    },
    {
      "type": "color",
      "id": "gradient_color_2",
      "label": "Gradientfarge 2",
      "default": "#4ecdc4"
    },
    {
      "type": "color",
      "id": "gradient_color_3",
      "label": "Gradientfarge 3",
      "default": "#45b7d1"
    },
    {
      "type": "color",
      "id": "gradient_color_4",
      "label": "Gradientfarge 4",
      "default": "#96ceb4"
    },
    {
      "type": "color",
      "id": "gradient_color_5",
      "label": "Gradientfarge 5",
      "default": "#feca57"
    },
    {
      "type": "color",
      "id": "gradient_color_6",
      "label": "Gradientfarge 6",
      "default": "#ff9ff3"
    },
    {
      "type": "color",
      "id": "gradient_color_7",
      "label": "Gradientfarge 7",
      "default": "#54a0ff"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "color",
      "id": "master_text_color",
      "label": "Hovedtekstfarge",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding topp",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bunn",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "footer_padding",
      "label": "Ytre padding",
      "min": 20,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "section_spacing",
      "label": "Avstand under innhold",
      "min": 0,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 20
    },
    {
      "type": "text",
      "id": "footer_aria_label",
      "label": "Aria-label for footer",
      "default": "Kul Kid footer"
    },
    {
      "type": "header",
      "content": "Retningslinjer"
    },
    {
      "type": "url",
      "id": "cookie_preferences_link",
      "label": "Lenke til informasjonskapsler"
    },
    {
      "type": "text",
      "id": "cookie_preferences_text",
      "label": "Tekst for informasjonskapsler"
    },
    {
      "type": "url",
      "id": "contact_info_link",
      "label": "Lenke til kontaktinformasjon"
    },
    {
      "type": "text",
      "id": "contact_info_text",
      "label": "Tekst for kontaktinformasjon"
    },
    {
      "type": "url",
      "id": "legal_notice_link",
      "label": "Lenke til juridiske retningslinjer"
    },
    {
      "type": "text",
      "id": "legal_notice_text",
      "label": "Tekst for juridiske retningslinjer"
    },
    {
      "type": "range",
      "id": "policies_bottom_margin",
      "label": "Avstand ved policy-rad",
      "min": 10,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "copyright_top_margin",
      "label": "Avstand før opphavsrett",
      "min": 10,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Egendefinert opphavsrettstekst"
    },
    {
      "type": "text",
      "id": "newsletter_success_fallback",
      "label": "Standard suksessmelding",
      "default": "Tusen takk! Sjekk innboksen din."
    }
  ],
  "blocks": [
    {
      "type": "newsletter",
      "name": "Nyhetsbrev",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Bli med i klubben!"
        },
        {
          "type": "range",
          "id": "heading_font_size",
          "label": "Skriftstørrelse overskrift",
          "min": 16,
          "max": 48,
          "step": 1,
          "unit": "px",
          "default": 28
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Beskrivelse",
          "default": "<p>Meld deg på Kul Kid-klubben og få eksklusive fordeler, lanseringer og tilbud rett i innboksen.</p>"
        },
        {
          "type": "range",
          "id": "description_font_size",
          "label": "Skriftstørrelse beskrivelse",
          "min": 14,
          "max": 26,
          "step": 1,
          "unit": "px",
          "default": 16
        },
        {
          "type": "image_picker",
          "id": "club_icon",
          "label": "Klubbikon"
        },
        {
          "type": "text",
          "id": "club_icon_alt",
          "label": "Alt-tekst for ikon",
          "default": "Kul Kid klubbikon"
        },
        {
          "type": "range",
          "id": "club_icon_width",
          "label": "Maks bredde på ikon",
          "min": 80,
          "max": 240,
          "step": 10,
          "unit": "px",
          "default": 160
        },
        {
          "type": "range",
          "id": "newsletter_padding_top",
          "label": "Topp-padding (px)",
          "min": 0,
          "max": 100,
          "step": 4,
          "default": 24
        },
        {
          "type": "range",
          "id": "newsletter_padding_bottom",
          "label": "Bunn-padding (px)",
          "min": 0,
          "max": 100,
          "step": 4,
          "default": 24
        },
        {
          "type": "range",
          "id": "newsletter_padding_side",
          "label": "Side-padding (px)",
          "min": 0,
          "max": 100,
          "step": 4,
          "default": 24
        },
        {
          "type": "text",
          "id": "email_placeholder",
          "label": "Plassholder for e-post",
          "default": "Din e-postadresse"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Knappetekst",
          "default": "Få 15% nå"
        },
        {
          "type": "range",
          "id": "button_font_size",
          "label": "Skriftstørrelse knapp",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "default": 15
        },
        {
          "type": "text",
          "id": "success_message",
          "label": "Suksessmelding",
          "default": "Tusen takk! Sjekk innboksen din."
        }
      ]
    },
    {
      "type": "link_group",
      "name": "Lenkegruppe",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Om Kul Kid"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Skriftstørrelse overskrift",
          "min": 14,
          "max": 36,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "link_size",
          "label": "Skriftstørrelse lenker",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "default": 15
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Navigasjonsmeny"
        },
        {
          "type": "checkbox",
          "id": "show_all_collections",
          "label": "Vis kolleksjoner når meny mangler",
          "default": false
        },
        {
          "type": "range",
          "id": "collection_limit",
          "label": "Antall kolleksjoner",
          "min": 3,
          "max": 12,
          "step": 1,
          "default": 6
        },
        {
          "type": "text",
          "id": "view_all_label",
          "label": "Lenketekst for \"Se alle\""
        },
        {
          "type": "url",
          "id": "view_all_url",
          "label": "Lenke for \"Se alle\""
        }
      ]
    },
    {
      "type": "social_icons",
      "name": "Sosiale ikoner",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Følg oss"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Skriftstørrelse overskrift",
          "min": 14,
          "max": 36,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "url",
          "id": "instagram_url",
          "label": "Instagram-lenke"
        },
        {
          "type": "image_picker",
          "id": "instagram_icon",
          "label": "Eget Instagram-ikon"
        },
        {
          "type": "url",
          "id": "facebook_url",
          "label": "Facebook-lenke"
        },
        {
          "type": "image_picker",
          "id": "facebook_icon",
          "label": "Eget Facebook-ikon"
        },
        {
          "type": "url",
          "id": "tiktok_url",
          "label": "TikTok-lenke"
        },
        {
          "type": "image_picker",
          "id": "tiktok_icon",
          "label": "Eget TikTok-ikon"
        },
        {
          "type": "url",
          "id": "spotify_url",
          "label": "Spotify-lenke"
        },
        {
          "type": "image_picker",
          "id": "spotify_icon",
          "label": "Eget Spotify-ikon"
        },
        {
          "type": "url",
          "id": "youtube_link",
          "label": "YouTube-lenke"
        },
        {
          "type": "image_picker",
          "id": "youtube_icon",
          "label": "Eget YouTube-ikon"
        },
        {
          "type": "range",
          "id": "social_icon_size",
          "label": "Ikonstørrelse",
          "min": 16,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 28
        }
      ]
    },
    {
      "type": "payments",
      "name": "Betalingsikoner",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Vi aksepterer"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Skriftstørrelse overskrift",
          "min": 14,
          "max": 36,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "icon_height",
          "label": "Høyde på ikoner",
          "min": 20,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 28
        },
        {
          "type": "checkbox",
          "id": "show_visa",
          "label": "Vis Visa",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "visa_icon",
          "label": "Eget Visa-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_mastercard",
          "label": "Vis Mastercard",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "mastercard_icon",
          "label": "Eget Mastercard-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_amex",
          "label": "Vis American Express",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "amex_icon",
          "label": "Eget American Express-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_paypal",
          "label": "Vis PayPal",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "paypal_icon",
          "label": "Eget PayPal-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_apple_pay",
          "label": "Vis Apple Pay",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "apple_pay_icon",
          "label": "Eget Apple Pay-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_klarna",
          "label": "Vis Klarna",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "klarna_icon",
          "label": "Eget Klarna-ikon"
        },
        {
          "type": "image_picker",
          "id": "custom_payment_svg",
          "label": "Ekstra betalingsikon"
        },
        {
          "type": "text",
          "id": "custom_payment_label",
          "label": "Alt-tekst for ekstra ikon"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Kul Kid Main Footer",
      "blocks": [
        {
          "type": "newsletter"
        },
        {
          "type": "link_group",
          "settings": {
            "heading": "Om Kul Kid"
          }
        },
        {
          "type": "link_group",
          "settings": {
            "heading": "Kategorier",
            "show_all_collections": true,
            "collection_limit": 6,
            "view_all_label": "Se alle kategoriene",
            "view_all_url": "/collections"
          }
        },
        {
          "type": "link_group",
          "settings": {
            "heading": "Hjelp & Service"
          }
        },
        {
          "type": "social_icons"
        },
        {
          "type": "payments"
        }
      ]
    }
  ]
}
{% endschema %}
