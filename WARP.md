# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

Project overview
- Shopify Online Store 2.0 theme based on Dawn. The active theme lives at repo root (assets, sections, snippets, templates, layout, locales, config).
- The kulkid/ subdirectory is an archived snapshot of the theme. Do not edit kulkid/* when making live changes.
- docs/ contains launch and performance artifacts; snapshot/ stores data/theme backups.

Commands (Shopify CLI + Theme Check)
- Start local dev server (opens a preview URL):
  ```sh path=null start=null
  shopify theme dev
  ```
- Open the current preview session in browser:
  ```sh path=null start=null
  shopify theme open
  ```
- Lint Liquid/CSS/JS with Theme Check (configured via .theme-check.yml):
  ```sh path=null start=null
  shopify theme check --fail-level=warning
  ```
- Lint a single file or path:
  ```sh path=null start=null
  shopify theme check sections/header.liquid
  ```
- Pull a live backup (production) to snapshot/ before making changes:
  ```sh path=null start=null
  shopify theme pull --environment=production --theme Live --path snapshot/live-theme-backup
  ```
- Push current theme to store (creates a new theme draft):
  ```sh path=null start=null
  shopify theme push --assume-yes
  ```
- Push and publish as the live theme (use with care):
  ```sh path=null start=null
  shopify theme push --publish --assume-yes
  ```

Commands (Python utilities)
- Set Shopify Admin API token as an environment variable (replace with your secret):
  ```sh path=null start=null
  export SHOPIFY_ACCESS_TOKEN={{SHOPIFY_ACCESS_TOKEN}}
  ```
- Snapshot store data to snapshot/kulkid_live_dump.json:
  ```sh path=null start=null
  python fetch_kulkid_data.py
  ```
- Inventory location maintenance (dry-run first):
  ```sh path=null start=null
  python scripts/update_inkthreadable_inventory.py --store-domain {{STORE_DOMAIN}} --dry-run
  # Then execute for real by removing --dry-run
  python scripts/update_inkthreadable_inventory.py --store-domain {{STORE_DOMAIN}}
  ```

High-level architecture
- layout/
  - theme.liquid is the global HTML shell; password.liquid for locked storefronts.
- sections/
  - Page-building blocks rendered by templates. Includes main-* sections (templatesâ€™ primary content areas) and UI sections (e.g., header.liquid, footer.liquid, image-banner.liquid). Some group schema lives in JSON (header-group.json, footer-group.json).
- templates/
  - JSON templates (e.g., index.json, collection.*.json, product.*.json) define page structure by composing sections and their settings.
- snippets/
  - Reusable partials (card-*, product-*, meta-tags.liquid, etc.) included by sections/templates.
- assets/
  - Theme CSS and JS. JavaScript modules map closely to UI features (e.g., cart-*.js, predictive-search.js, section-*.css). global.js initializes shared behavior.
- locales/
  - Translation JSON files. en.default.json and nb.json are primary for this store; keep keys aligned when adding UI text.
- config/
  - settings_schema.json defines Theme Editor settings; settings_data.json is auto-generated by Shopify (avoid hand-editing; Admin may overwrite).
- blocks/
  - Project-specific UI blocks (custom Liquid components) used by sections/snippets when composing complex areas like headers/footers.
- docs/
  - codex_launch_prompt.md contains the go-live checklist and CLI sequences; docs/perf holds Lighthouse outputs for reference.

Conventions and notes
- Active work is at repo root. Treat kulkid/* as read-only history unless explicitly migrating content.
- Theme Check is enforced via .theme-check.yml (custom severity overrides are set for LiquidTag). Use the CLI commands above before pushing.
- Keep settings_schema.json and locales/* in sync with changes to section/snippet schemas so the Theme Editor reflects new options and translations.
- Before any destructive change, create a live backup with shopify theme pull (see command above).

Related project rules and automation
- AGENTS.md documents internal agents (codex-dev, schema-builder, lazyload-optimizer, etc.) and their directory responsibilities. Work is manual-trigger only; no autonomous writes to main. Focus edits on /sections, /snippets, /assets, /config; avoid /kulkid.
- For launch operations and validation steps (payments, analytics, backups), follow docs/codex_launch_prompt.md.
